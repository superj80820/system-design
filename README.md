# system-design

## exchange

![](https://i.imgur.com/KKnKXUi.png)

![](https://i.imgur.com/V7KFvvC.png)

* 壓測:
  * 機器: EC2 c5.18xlarge
  * RPS (max): 102,988.52
* 預覽網頁(❗僅用最低效能運行預覽，不是production運作規格): https://preview.exchange.messfar.com

┌─────────────┐                                                                 
│             │                                                                 
│             │                                                                 
│             │                                                                 
│ order event ├─────────────┐                                                   
│             │             │                                                   
│             │             │                                                   
│             │             │                                                   
└─────────────┘             │                                                   
                            ▼                                                   
┌─────────────┐      ┌─────────────┐      ┌─────────────┐                       
│             │      │             │      │             │                       
│             │      │             │      │             │                       
│             │      │             │      │             │                       
│deposit event├─────►│  sequencer  ├─────►│   trading   │                       
│             │      │             │      │             │                       
│             │      │             │      │             │                       
│             │      │             │      │             │                       
└─────────────┘      └─────────────┘      └──────┬──────┘                       
                            ▲                    │                              
┌─────────────┐             │                    ▼                              
│             │             │             ┌─────────────┐        ┌─────────────┐
│             │             │             │             │        │             │
│             │             │             │             │        │             │
│   transfer  ├─────────────┘             │             │        │             │
│    event    │                           │    asset    ├───────►│  asset mq   │
│             │                           │             │        │             │
│             │                           │             │        │             │
└─────────────┘                           │             │        │             │
                                          └──────┬──────┘        └─────────────┘
                                                 │                              
                                                 ▼                              
                                          ┌─────────────┐        ┌─────────────┐
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          │    order    │        │  ordes mq   │
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          └──────┬──────┘        └─────────────┘
                                                 │                              
                                                 ▼                              
                                          ┌─────────────┐        ┌─────────────┐
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          │   matching  │        │ matching mq │
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          └──────┬──────┘        └─────────────┘
                                                 │                              
                                                 ▼                              
                                          ┌─────────────┐        ┌─────────────┐
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          │   clearing  │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          │             │        │             │
                                          └─────────────┘        └─────────────┘